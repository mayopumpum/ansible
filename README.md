# Инструменты автоматизации

## Part 1. Удаленное конфигурирование узла через Ansible

В этой главе тебе предстоит осуществить удаленную настройку узла для разворачивания мультисервисного приложения.

**== Задание ==**

1) Создать с помощью Vagrant три машины - manager, node01, node02. Не устанавливать с помощью shell-скриптов docker при создании машин на Vagrant! Прокинуть порты node01 на локальную машину для доступа к пока еще не развернутому микросервисному приложению.

2) Подготовить manager как рабочую станцию для удаленного конфигурирования (помощь по Ansible в материалах).
- Зайти на manager. 
- На manager проверить подключение к node01 через ssh по приватной сети. 
- Сгенерировать ssh-ключ для подключения к node01 из manager (без passphrase). 
- Скопировать на manager docker-compose файл и исходный код микросервисов. (Используй проект из папки src и docker-compose файл из предыдущей главы. Помощь по ssh в материалах.)
- Установить Ansible на менеджер и создать папку ansible, в которой создать inventory-файл. 
- Использовать модуль ping для проверки подключения через Ansible. 
- Результат выполнения модуля поместить в отчет.

3) Написать первый плейбук для Ansible, который выполняет apt update, устанавливает docker, docker-compose, копирует compose-файл из manager'а и разворачивает микросервисное приложение. 

4) Прогнать заготовленные тесты через postman и удостовериться, что все они проходят успешно. В отчете отобразить результаты тестирования.

5) Сформировать три роли: 
 - роль application выполняет развертывание микросервисного приложения при помощи docker-compose,
 - apache устанавливает и запускает стандартный apache сервер
 - postgres устанавливает и запускает postgres, создает базу данных с произвольной таблицей и добавляет в нее три произвольные записи. 
 - Назначить первую роль node01 и вторые две роли node02, проверить postman-тестами работоспособность микросервисного приложения, удостовериться в доступности postgres и apache-сервера. Для Apache веб-страница должна открыться в браузере. Что касается PostgreSQL, необходимо подключиться с локальной машины и отобразить содержимое ранее созданной таблицы с данными.

6) Созданные в этом разделе файлы разместить в папке `src\ansible01` в личном репозитории.

